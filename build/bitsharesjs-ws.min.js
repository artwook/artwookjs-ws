!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.t=n();else if("function"==typeof define&&define.i)define([],n);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).o=n()}}(function(){return function(){function n(t,e,i){function r(u,s){if(!e[u]){if(!t[u]){var c="function"==typeof require&&require;if(!s&&c)return c(u,!0);if(o)return o(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var a=e[u]={t:{}};t[u][0].call(a.t,function(n){return r(t[u][1][n]||n)},a,a.t,n,t,e,i)}return e[u].t}for(var o="function"==typeof require&&require,u=0;u<i.length;u++)r(i[u]);return r}return n}()({1:[function(n,t,e){(function(i){"use strict";function r(n){return n&&n.u?n:{default:n}}function o(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}e.u=!0;var u=r(n("./ChainWebSocket")),s=r(n("./GrapheneApi")),c=r(n("./ChainConfig"));if(i&&i.s)var f;else if(i)i.h="";else;var a=!1,d=function(){function n(){o(this,n)}return n.l=function(n){this.v=n,f&&f.l(n)},n.p=function(n){a=n},n.reset=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ws://localhost:8090",e=arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3,r=this,o=arguments[3],u=arguments[4];return this.close().then(function(){return(f=new n).l(r.v),f&&e&&f.connect(t,i,o,u),f})},n._=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ws://localhost:8090",e=arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3,r=arguments[3],o=arguments[4];return f||(f=new n).l(this.v),f&&e&&f.connect(t,i,r),o&&(f.m=o),f},n.T=function(){return this._().k},n.close=function(){return f?new Promise(function(n){f.close().then(function(){f=null,n()})}):Promise.resolve()},n.prototype.connect=function(n,t){var e=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{g:!1,P:!1};this.url=n;if("undefined"!=typeof window&&window.location&&"https:"===window.location.protocol&&n.indexOf("wss://")<0)throw new Error("Secure domains require wss connection");this.C&&(this.C.v=null,this.C.S=null,this.C.O=null,this.C.A=null),this.C=new u.default(n,this.v,t,a,function(n){e.W&&!n&&e.W.exec("get_objects",[["2.1.0"]]).catch(function(n){})}),this.G=this.C.I("","").then(function(){e.W=new s.default(e.C,"database"),e.q=new s.default(e.C,"network_broadcast"),e.H=new s.default(e.C,"history"),i.P&&(e.N=new s.default(e.C,"orders")),i.g&&(e.U=new s.default(e.C,"crypto"));var n=e.W.init().then(function(){return e.W.exec("get_chain_id",[]).then(function(n){return e.k=n,c.default.j(n)})});e.C.A=function(){e.C&&e.C.I("","").then(function(){e.W.init().then(function(){e.v&&e.v("reconnect")}),e.q.init(),e.H.init(),i.P&&e.N.init(),i.g&&e.U.init()})},e.C.O=function(){e.close().then(function(){e.m&&e.m()})};var t=[n,e.q.init(),e.H.init()];return i.P&&t.push(e.N.init()),i.g&&t.push(e.U.init()),Promise.all(t)}).catch(function(t){return console.error(n,"Failed to initialize with error",t&&t.message),e.close().then(function(){throw t})})},n.prototype.close=function(){var n=this;return this.C&&1===this.C.F.readyState?this.C.close().then(function(){n.C=null}):(this.C=null,Promise.resolve())},n.prototype.M=function(){return this.W},n.prototype.B=function(){return this.q},n.prototype.D=function(){return this.H},n.prototype.J=function(){return this.U},n.prototype.K=function(){return this.N},n.prototype.l=function(n){this.v=n},n}();d.db=new Proxy(d,{get:function(n,t){return function(){return n._().M().exec(t,[].concat(Array.prototype.slice.call(arguments)))}}}),d.R=new Proxy(d,{get:function(n,t){return function(){return n._().B().exec(t,[].concat(Array.prototype.slice.call(arguments)))}}}),d.history=new Proxy(d,{get:function(n,t){return function(){return n._().D().exec(t,[].concat(Array.prototype.slice.call(arguments)))}}}),d.crypto=new Proxy(d,{get:function(n,t){return function(){return n._().J().exec(t,[].concat(Array.prototype.slice.call(arguments)))}}}),d.L=new Proxy(d,{get:function(n,t){return function(){return n._().K().exec(t,[].concat(Array.prototype.slice.call(arguments)))}}}),e.default=d,t.t=e.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{V:2,X:3,Y:4}],2:[function(n,t,e){(function(n){"use strict";e.u=!0;var i=void 0,r={Z:n.nn.$||"GPH"};i={tn:"CORE",Z:"GPH",en:15,in:86400,rn:86400,on:{un:{tn:"AKC",Z:"AKC",k:"c4799f69ba65aec94fe939ef30bb2b4b4451dfd504a21efd2a2b02cd2e1e0618"},sn:{tn:"BTS",Z:"BTS",k:"4018d7844c78f6a6c41c6a552b898022310fc5dec06da467ee7905a8dad512c8"},cn:{tn:"MUSE",Z:"MUSE",k:"45ad2d3f9ef92a49b55c2227eb06123f613bb35dd08bd876f2aea21925a67a67"},fn:{tn:"TEST",Z:"TEST",k:"39f5e2ede1f8bc1a3a54a7914414e3779e33193f1f5693510e73cb7a87617447"},an:{tn:"GOV",Z:"FEW",k:"1cfde7c388b9e8ac06462d68aadbd966b58f88797637d9af805b4560b0e9661e"}},j:function(n){var t=void 0,e=void 0,o=void 0,u=void 0,s=void 0;for(t=0,e=(s=Object.keys(i.on)).length;t<e;t++)if(u=s[t],(o=i.on[u]).k===n)return i.dn=u,o.Z&&(i.Z=o.Z,r.Z=o.Z),{dn:u,R:o};i.dn||console.log("Unknown chain id (this may be a testnet)",n)},reset:function(){i.tn="CORE",i.Z="GPH",r.Z="GPH",i.en=15,i.in=86400,console.log("Chain config reset")},hn:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"GPH";i.Z=n,r.Z=n}},e.default=i,t.t=e.default}).call(this,n("_process"))},{ln:6}],3:[function(n,t,e){(function(i,r){"use strict";function o(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function u(n){return n||"undefined"==typeof WebSocket||"undefined"==typeof document?s:WebSocket}e.u=!0;var s=void 0;s="undefined"!=typeof WebSocket||i.nn.wn?WebSocket:n("ws"),r&&r.s&&(s=function(n){return wx.vn({url:n})});var c=5,f=2*c,a=function(){function n(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,s=this,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;o(this,n),this.url=t,this.v=e,this.bn=setTimeout(function(){if(s.pn){var n=s.pn;s.pn=null,s.close(),n(new Error("Connection attempt timed out after "+i/1e3+"s"))}},i),this.pn=null,this.A=null,this.closed=!1,this._n=c,this.mn=f,this.S=d,this.yn=new Promise(function(n,e){s.pn=e;var i=u(a);try{s.F=new i(t)}catch(n){s.F={readyState:3,close:function(){}},e(new Error("Invalid url",t," closed"))}s.F.onopen=function(){clearTimeout(s.bn),s.v&&s.v("open"),s.A&&s.A(),s.Tn=setInterval(function(){if(s.mn--,0==s.mn)return console.error(s.url+" connection is dead, terminating ws"),void s.close();s._n--,0==s._n&&(s.S&&s.S(s.closed),s._n=c)},5e3),s.pn=null,n()},s.F.onerror=function(n){s.Tn&&(clearInterval(s.Tn),s.Tn=void 0),clearTimeout(s.bn),s.v&&s.v("error"),s.pn&&s.pn(n)},s.F.onmessage=function(n){s.mn=f,s.listener(JSON.parse(n.data))},s.F.onclose=function(){s.closed=!0,s.Tn&&(clearInterval(s.Tn),s.Tn=void 0);for(var n=new Error("connection closed"),t=s.kn+1;t<=s.gn;t+=1)s.En[t].reject(n);s.v&&s.v("closed"),s.Pn&&s.Pn(),s.O&&s.O()},r&&r.s&&(s.F.xn(s.F.onopen),s.F.Cn(s.F.onclose),s.F.Sn(s.F.onerror),s.F.On(s.F.onmessage))}),this.gn=0,this.kn=0,this.En={},this.An={},this.Wn={}}return n.prototype.call=function(n){var t=this;if(1!==this.F.readyState)return Promise.reject(new Error("websocket state error:"+this.F.readyState));var e=n[1];if(this.gn+=1,"set_subscribe_callback"!==e&&"subscribe_to_market"!==e&&"broadcast_transaction_with_callback"!==e&&"set_pending_transaction_callback"!==e||(this.An[this.gn]={Gn:n[2][0]},n[2][0]=this.gn),"unsubscribe_from_market"===e||"unsubscribe_from_accounts"===e){if("function"!=typeof n[2][0])throw new Error("First parameter of unsub must be the original callback");var i=n[2].splice(0,1)[0];for(var o in this.An)if(this.An[o].Gn===i){this.Wn[this.gn]=o;break}}var u={method:"call",In:n};return u.id=this.gn,this._n=c,new Promise(function(n,e){t.En[t.gn]={time:new Date,resolve:n,reject:e},r&&r.s?t.F.send({data:JSON.stringify(u)}):t.F.send(JSON.stringify(u))})},n.prototype.listener=function(n){var t=!1,e=null;"notice"===n.method&&(t=!0,n.id=n.In[0]),t?e=this.An[n.id].Gn:(e=this.En[n.id],this.kn=n.id),e&&!t?(n.error?e.reject(n.error):e.resolve(n.result),delete this.En[n.id],this.Wn[n.id]&&(delete this.An[this.Wn[n.id]],delete this.Wn[n.id])):e&&t?e(n.In[1]):console.log("Warning: unknown websocket response: ",n)},n.prototype.I=function(n,t){var e=this;return this.yn.then(function(){return e.call([1,"login",[n,t]])})},n.prototype.close=function(){var n=this;return new Promise(function(t){if(clearInterval(n.Tn),n.Tn=void 0,n.Pn=function(){t(),n.Pn=null},!n.F)return console.log("Websocket already cleared",n),t();n.F.terminate?n.F.terminate():n.F.close(),3===n.F.readyState&&t()})},n}();e.default=a,t.t=e.default}).call(this,n("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{ln:6,F:5}],4:[function(n,t,e){"use strict";function i(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}e.u=!0;var r=function(){function n(t,e){i(this,n),this.C=t,this.qn=e}return n.prototype.init=function(){var n=this;return this.C.call([1,this.qn,[]]).then(function(t){return n.Hn=t,n})},n.prototype.exec=function(n,t){return this.C.call([this.Hn,n,t]).catch(function(n){throw n})},n}();e.default=r,t.t=e.default},{}],5:[function(n,t,e){},{}],6:[function(n,t,e){function i(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(n){if(d===setTimeout)return setTimeout(n,0);if((d===i||!d)&&setTimeout)return d=setTimeout,setTimeout(n,0);try{return d(n,0)}catch(t){try{return d.call(null,n,0)}catch(t){return d.call(this,n,0)}}}function u(n){if(h===clearTimeout)return clearTimeout(n);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(n);try{return h(n)}catch(t){try{return h.call(null,n)}catch(t){return h.call(this,n)}}}function s(){b&&w&&(b=!1,w.length?v=w.concat(v):p=-1,v.length&&c())}function c(){if(!b){var n=o(s);b=!0;for(var t=v.length;t;){for(w=v,v=[];++p<t;)w&&w[p].Nn();p=-1,t=v.length}w=null,b=!1,u(n)}}function f(n,t){this.Un=n,this.jn=t}function a(){}var d,h,l=t.t={};!function(){try{d="function"==typeof setTimeout?setTimeout:i}catch(n){d=i}try{h="function"==typeof clearTimeout?clearTimeout:r}catch(n){h=r}}();var w,v=[],b=!1,p=-1;l.Fn=function(n){var t=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];v.push(new f(n,t)),1!==v.length||b||o(c)},f.prototype.Nn=function(){this.Un.apply(null,this.jn)},l.title="browser",l.wn=!0,l.nn={},l.Mn=[],l.version="",l.Bn={},l.Dn=a,l.addListener=a,l.Jn=a,l.Kn=a,l.removeListener=a,l.Rn=a,l.zn=a,l.Ln=a,l.Vn=a,l.Qn=function(n){return[]},l.Xn=function(n){throw new Error("process.binding is not supported")},l.Yn=function(){return"/"},l.Zn=function(n){throw new Error("process.chdir is not supported")},l.$n=function(){return 0}},{}]},{},[1])(1)});